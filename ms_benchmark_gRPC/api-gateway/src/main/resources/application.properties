spring.application.name=api-gateway
server.port=8765

# Config Server Import (Spring Boot 2.4+ için gerekli)
spring.config.import=optional:configserver:${CONFIG_SERVER_URI:http://localhost:8888}

# # Eureka Configuration
# eureka.client.service-url.defaultZone=http://localhost:8761/eureka
# eureka.client.register-with-eureka=true
# eureka.client.fetch-registry=true
# eureka.instance.prefer-ip-address=true

# Cloud Compatibility
spring.cloud.compatibility-verifier.enabled=false

# Gateway Discovery - Config Server'dan override edilecek
# Manuel route kullanacağız, discovery locator'ı kapatıyoruz
spring.cloud.gateway.discovery.locator.enabled=false
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# ===============================================
# LOGGING CONFIGURATION
# ===============================================

# Log Levels - Gateway ve Filter'lar için detaylı loglama
logging.level.root=INFO
logging.level.com.microservices.api_gateway=INFO
logging.level.com.microservices.api_gateway.filter.GlobalLoggingFilter=INFO
logging.level.com.microservices.api_gateway.filter.RequestTrackingFilter=INFO
logging.level.com.microservices.api_gateway.filter.PerformanceMonitoringFilter=INFO
logging.level.com.microservices.api_gateway.filter.AuthenticationFilter=DEBUG

# Spring Cloud Gateway loglama
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.cloud.gateway.handler.RoutePredicateHandlerMapping=DEBUG
logging.level.reactor.netty=INFO

# HTTP istekleri için detaylı loglama
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.http=DEBUG

# Log Pattern - Renkli ve detaylı
logging.pattern.console=%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx

# Log dosyası ayarları
logging.file.name=logs/api-gateway.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.file.total-size-cap=1GB

# Logback rolling policy
logging.logback.rollingpolicy.file-name-pattern=logs/api-gateway-%d{yyyy-MM-dd}.%i.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30
